<pageid>patch</pageid>

<title>Patch</title>

<header>
</header>

<contentBackgroundColor>white</contentBackgroundColor>

<main>
	<div id='patchImage' class='row'></div>
</main>

<footer>

	<script type="text/javascript">
		/** load a new patch */
		DataService.loadNewPatch({
			/** data */
		},{
			/** options */
			dest: $("#patchImage"),
			callback: function(patchObj, options) {
				var patchFile = patchObj.get("image")
				var fileUrl = patchFile.url()

				var imageEle = new Image()
				imageEle.onload = function() {
					$(this).addClass("center-block")
					$(this).width("90vw")
					$(this).fadeIn()
					patchJS.patchEle = $(this)
					$(this).bind("touchstart", patchJS.onTouchStart)
				}
				imageEle.src = fileUrl
				$(imageEle).hide()
				$(imageEle).attr("id", patchObj.id)
				$(imageEle).attr("data-height", patchObj.get("height"))
				$(imageEle).attr("data-width", patchObj.get("width"))
				options.dest.append($(imageEle))
				options.dest.removeAttr("id")
			}
		})


	</script>
</footer>